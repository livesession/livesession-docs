import{r as l,p as f,u as h,w as x,M as A,L as j,S as P,a as E,O as w}from"./chunk-NL6KNZEE-BJGdp5TW.js";import{j as a}from"./jsx-runtime-D_zvdyIk.js";import{v as k}from"./virtual_xyd-settings-CuYDwjKg.js";var C=l.createContext(void 0);l.createContext(void 0);function S({children:t,analytics:o}){return f.createElement(C,{value:o},t)}function p(t){for(const o of t.providers||[])o.init();return{page(){for(const o of t.providers||[])o.page()},track(o,e){for(const r of t.providers||[]){if(!r.flatTypesOnly){r.track(o,e);continue}if(r.allowArrayTypes&&Array.isArray(e)){for(const n of e)r.track(o,n);continue}let c={};for(const n in e)typeof e[n]=="object"&&(c[n]="NOT_SUPPORTED_TYPE"),c[n]=e[n];r.track(o,c)}}}}var g=l.createContext({});function O({children:t,settings:o,loader:e}){const r=h(),[c,n]=l.useState(()=>p({providers:[]}));async function d(){const u=(await T(o,e)).filter(Boolean),i=p({providers:u});i.page(),n(i)}return l.useEffect(()=>{d()},[]),l.useEffect(()=>{c.page()},[r.pathname]),f.createElement(g,{value:{analytics:c}},f.createElement(S,{analytics:c},t))}async function T(t,o){var e;const r=Object.keys(((e=t==null?void 0:t.integrations)==null?void 0:e.analytics)||{}).map(async n=>{var d,v;const u=((v=(d=t==null?void 0:t.integrations)==null?void 0:d.analytics)==null?void 0:v[n])||[],i=await o(n);if(!i){console.error(`Cannot load provider ${n} module`);return}return Array.isArray(u)?i(...u):i(u)});return await Promise.all(r)}const _=async t=>(console.error(`Provider ${t} not found`),null),{settings:s}=k,M="/public/favicon.png";var y;const b=((y=s==null?void 0:s.theme)==null?void 0:y.favicon)||M;var m;const L=((m=s==null?void 0:s.theme)==null?void 0:m.head)||[];function I({children:t}){var e;const o=((e=s==null?void 0:s.theme)==null?void 0:e.defaultColorScheme)||"os";return a.jsxs("html",{lang:"en","data-color-scheme":o,children:[a.jsxs("head",{children:[a.jsx("meta",{charSet:"utf-8"}),a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),a.jsx("link",{rel:"icon",type:"image/png",sizes:"32x32",href:b}),L.map(([r,c],n)=>f.createElement(r,{key:n,...c})),a.jsx(A,{}),a.jsx(j,{})]}),a.jsx(O,{settings:s,loader:_,children:a.jsxs("body",{children:[t,a.jsx(P,{}),a.jsx(E,{})]})})]})}const R=x(function(){return a.jsx(w,{})});export{I as Layout,R as default};
